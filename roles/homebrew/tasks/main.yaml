- name: Check if Homebrew is installed
  stat:
    path: /home/linuxbrew/.linuxbrew/Homebrew/bin/brew
  register: homebrew_installed

- name: install homebrew
  become: true
  when: homebrew_installed.stat.exists is false
  shell: |
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

- name: add homebrew to path
  blockinfile:
    path: "~/.bashrc"
    marker: "# {mark} ANSIBLE MANAGED BLOCK: homebrew"
    block: |
      PATH="$PATH:/home/linuxbrew/.linuxbrew/Homebrew/bin/"
