{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:base"],
  "ignorePaths": ["**/.ansible/**", "**/node_modules/**"],
  "regexManagers": [
    {
      "fileMatch": [
        "^roles/.*/tasks/main\\.yml$",
        "^roles/.*/tasks/main\\.yaml$"
      ],
      "matchStrings": [
        "helm plugin install --version\\s+(?<currentValue>[0-9]+\\.[0-9]+(?:\\.[0-9]+)?)\\s+https://github\\.com/(?<depName>[^/]+/[^/]+)"
      ],
      "datasourceTemplate": "github-releases"
    },
    {
      "fileMatch": [
        "^.*docker-compose\\.yml$",
        "^compose\\.yaml$",
        "^roles/.*/files/docker-compose\\.yml$"
      ],
      "matchStrings": [
        "image:\\s*['\"]?(?<depName>[^:]+):(?<currentValue>[\\w.-]+)['\"]?"
      ],
      "datasourceTemplate": "docker"
    },
    {
      "fileMatch": ["^playbook\\.yml$"],
      "matchStrings": [
        "version:\\s*['\"]?(?<currentValue>v[0-9]+)['\"]?.*?https://extensions\\.gnome\\.org/extension/(?<depName>[0-9]+)/"
      ],
      "datasourceTemplate": "gnome-extension"
    },
    {
      "fileMatch": [
        "^roles/.*/tasks/main\\.yml$",
        "^roles/.*/tasks/main\\.yaml$"
      ],
      "matchStrings": ["php_version:\\s*['\"]?(?<currentValue>[\\d.]+)['\"]?"],
      "depNameTemplate": "php/php-src",
      "datasourceTemplate": "github-tags",
      "versioningTemplate": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+).*$",
      "extractVersionTemplate": "^php-(?<version>.*)$"
    },
    {
      "fileMatch": [
        "^roles/.*/tasks/main\\.yml$",
        "^roles/.*/tasks/main\\.yaml$"
      ],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[^\\s]+) depName=(?<depName>[^\\s]+).*\\n\\s+[^:]+:\\s*['\"]?(?<currentValue>[\\w.-]+)['\"]?"
      ],
      "datasourceTemplate": "{{{datasource}}}"
    },
    {
      "fileMatch": ["^\\.devcontainer/.*Dockerfile$"],
      "matchStrings": ["FROM\\s+(?<depName>[^:]+):(?<currentValue>[^\\s]+)"],
      "datasourceTemplate": "docker"
    },
    {
      "fileMatch": ["^\\.devcontainer/.*Dockerfile$"],
      "matchStrings": [
        "ENV\\s+[^_]+_VERSION\\s+['\"]?(?<currentValue>v?[0-9]+\\.[0-9]+(?:\\.[0-9]+)?)['\"]?.*?https://github\\.com/(?<depName2>[^/]+/[^/]+)"
      ],
      "depNameTemplate": "{{{depName2}}}",
      "datasourceTemplate": "github-releases"
    },
    {
      "fileMatch": ["^\\.devcontainer/.*Dockerfile$"],
      "matchStrings": [
        "ENV\\s+NVM_VERSION\\s+['\"]?(?<currentValue>v?[0-9]+\\.[0-9]+(?:\\.[0-9]+)?)['\"]?"
      ],
      "depNameTemplate": "nvm-sh/nvm",
      "datasourceTemplate": "github-releases"
    },
    {
      "fileMatch": ["^\\.devcontainer/.*Dockerfile$"],
      "matchStrings": [
        "ENV\\s+NODE_VERSION\\s+['\"]?(?<currentValue>\\d+)['\"]?"
      ],
      "depNameTemplate": "nodejs/node",
      "datasourceTemplate": "github-tags",
      "versioningTemplate": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+).*?$",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "fileMatch": ["^\\.devcontainer/devcontainer\\.json$"],
      "matchStrings": [
        "\"version\":\\s*['\"]?(?<currentValue>\\d+)['\"]?.*?\"id\":\\s*['\"]?(?<depName>[^'\"]+)['\"]?"
      ],
      "datasourceTemplate": "devcontainer-feature"
    }
  ],
  "packageRules": [
    {
      "matchDepTypes": ["github-releases"],
      "extractVersion": "^v?(?<version>.*)$"
    },
    {
      "matchDatasources": ["docker"],
      "versioning": "loose"
    },
    {
      "matchDepNames": ["cincproject/cinc"],
      "versioning": "regex:^(?<major>\\d+)(?:\\.(?<minor>\\d+))?$"
    },
    {
      "matchDepNames": ["nodejs/node"],
      "extractVersion": "^v?(?<version>.*)$"
    },
    {
      "matchDepNames": ["php/php-src"],
      "extractVersion": "^php-(?<version>.*)$"
    }
  ]
}
